{"version":3,"file":"index.es.js","sources":["../src/components/useFetch/index.jsx"],"sourcesContent":["import { useEffect, useState } from \"react\";\nexport function useFetch(url, headers, handleErrorCode = handleError) {\n  const controller = new AbortController();\n\n  const [status, setStatus] = useState(\"idle\");\n  const [data, setData] = useState(null);\n  const [error, setError] = useState(null);\n  useEffect(() => {\n    async function fetchData(url) {\n      setStatus(\"loading\");\n      try {\n        const res = await fetch(url, {\n          ...headers,\n          signal: controller.signal,\n        });\n        if (!res.ok) handleErrorCode(res.status);\n\n        const data = await res.json();\n        setData(data);\n        setStatus(\"success\");\n      } catch (error) {\n        setStatus(\"error\");\n        setError(error);\n        console.error(error);\n      } finally {\n        return () => controller.abort();\n      }\n    }\n    fetchData(url);\n  }, [url]);\n\n  return [data, status, error];\n}\n\nfunction handleError(code) {\n  switch (code) {\n    case 400:\n      throw new Error(\"Bad Request\");\n    case 401:\n      throw new Error(\"Request is unauthorized\");\n    case 403:\n      throw new Error(\"Request has been denied\");\n    case 404:\n      throw new Error(\"Requested data not found\");\n    case 405:\n      throw new Error(\"Method Not Allowed\");\n    case 406:\n      throw new Error(\"Not Acceptable\");\n    case 408:\n      throw new Error(\"Request Timedout\");\n    default:\n      throw new Error(\"There's been an error while retrieving data\");\n  }\n}\n"],"names":["useFetch","url","headers","handleErrorCode","handleError","controller","status","setStatus","useState","data","setData","error","setError","useEffect","fetchData","res","code"],"mappings":";AACO,SAASA,EAASC,GAAKC,GAASC,IAAkBC,GAAa;AAC9D,QAAAC,IAAa,IAAI,mBAEjB,CAACC,GAAQC,CAAS,IAAIC,EAAS,MAAM,GACrC,CAACC,GAAMC,CAAO,IAAIF,EAAS,IAAI,GAC/B,CAACG,GAAOC,CAAQ,IAAIJ,EAAS,IAAI;AACvC,SAAAK,EAAU,MAAM;AACd,mBAAeC,EAAUb,GAAK;AAC5B,MAAAM,EAAU,SAAS;AACf,UAAA;AACI,cAAAQ,IAAM,MAAM,MAAMd,GAAK;AAAA,UAC3B,GAAGC;AAAA,UACH,QAAQG,EAAW;AAAA,QAAA,CACpB;AACD,QAAKU,EAAI,MAAIZ,EAAgBY,EAAI,MAAM;AAEjCN,cAAAA,IAAO,MAAMM,EAAI;AACvB,QAAAL,EAAQD,CAAI,GACZF,EAAU,SAAS;AAAA,eACZI,GAAO;AACd,QAAAJ,EAAU,OAAO,GACjBK,EAASD,CAAK,GACd,QAAQ,MAAMA,CAAK;AAAA,MAAA,UACnB;AACO,eAAA,MAAMN,EAAW;MAC1B;AAAA,IACF;AACA,IAAAS,EAAUb,CAAG;AAAA,EAAA,GACZ,CAACA,CAAG,CAAC,GAED,CAACQ,GAAMH,GAAQK,CAAK;AAC7B;AAEA,SAASP,EAAYY,GAAM;AACzB,UAAQA,GAAM;AAAA,IACZ,KAAK;AACG,YAAA,IAAI,MAAM,aAAa;AAAA,IAC/B,KAAK;AACG,YAAA,IAAI,MAAM,yBAAyB;AAAA,IAC3C,KAAK;AACG,YAAA,IAAI,MAAM,yBAAyB;AAAA,IAC3C,KAAK;AACG,YAAA,IAAI,MAAM,0BAA0B;AAAA,IAC5C,KAAK;AACG,YAAA,IAAI,MAAM,oBAAoB;AAAA,IACtC,KAAK;AACG,YAAA,IAAI,MAAM,gBAAgB;AAAA,IAClC,KAAK;AACG,YAAA,IAAI,MAAM,kBAAkB;AAAA,IACpC;AACQ,YAAA,IAAI,MAAM,6CAA6C;AAAA,EACjE;AACF;"}